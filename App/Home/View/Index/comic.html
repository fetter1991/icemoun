<!DOCTYPE html>
<html lang="zh-cmn-hans">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="referrer" content="no-referrer"/>
    <meta name="theme-color" content="#{THEME_COLOR}">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1">
    <meta name="author" content="LancerComet">
    <meta name="baidu-site-verification" content="gIs5efZPwQ">
    <title id="app-title">漫画</title>
    <link rel="icon" type="image/png" href="__STATIC__/img/logo.png">
    <link href="__STATIC__/css/comic_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="manga-mobile-app">
    <div class="category-list">
        <div class="classify-list-container border-box">
            <div class="label-list m-auto border-box p-relative">
                <div class="label-row">
                    <div class="first-label dp-i-block v-top">
                        <div class="classify-label selected">全部</div>
                    </div>
                    <div class="classify-label">冒险</div>
                    <div class="classify-label">热血</div>
                    <div class="classify-label">搞笑</div>
                    <div class="classify-label">恋爱</div>
                    <div class="classify-label">少女</div>
                    <div class="classify-label">纯爱</div>
                    <div class="classify-label">日常</div>
                    <div class="classify-label">校园</div>
                    <div class="classify-label">运动</div>
                    <div class="classify-label">正能量</div>
                    <div class="classify-label">治愈</div>
                    <div class="classify-label">橘味</div>
                    <div class="classify-label">古风</div>
                    <div class="classify-label">玄幻</div>
                    <div class="classify-label">奇幻</div>
                    <div class="classify-label">惊奇</div>
                    <div class="classify-label">悬疑</div>
                    <div class="classify-label">都市</div>
                    <div class="classify-label">总裁</div>
                </div>
                <div class="label-row">
                    <div class="first-label dp-i-block v-top">
                        <div class="classify-label selected">全部</div>
                    </div>
                    <div class="classify-label">大陆</div>
                    <div class="classify-label">日本</div>
                    <div class="classify-label">其他</div>
                </div>
                <div class="label-row">
                    <div class="first-label dp-i-block v-top">
                        <div class="classify-label selected">全部</div>
                    </div>
                    <div class="classify-label">连载</div>
                    <div class="classify-label">完结</div>
                    <div class="classify-label">新上架</div>
                </div>
                <div class="label-row">
                    <div class="first-label dp-i-block v-top">
                        <div class="classify-label selected">全部</div>
                    </div>
                    <div class="classify-label">免费</div>
                    <div class="classify-label">付费</div>
                    <div class="classify-label">等就免费</div>
                </div>

                <div class="switch-btn p-absolute pointer">
                    <span class="icon v-middle dp-i-block icon-down"></span>
                    <span class="v-middle">筛选</span>
                </div>
            </div>
            <div class="manga-list m-auto">
                <div class="list-data border-box m-auto" id="app">
                    <a v-for="(item,index) in list" v-bind:href='"/Home/Index/article?id="+item.id'
                       v-bind:title="item.name" class="manga-card border-box dp-i-block">
                        <div class="manga-cover bg-cover bg-center">
                            <img v-bind:src="item.cover" width="100%"/>
                        </div>
                        <div class="manga-title">{{item.name}}</div>
                        <div class="manga-info"><span>共{{item.total_chapters}}话</span></div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="__STATIC__/js/vue.js"></script>
<script src="__STATIC__/js/jquery.min.js"></script>
<script src="__STATIC__/js/vue-lazyload.js"></script>
<script>
    Vue.use(VueLazyload, {
        preLoad: 1.6,
        error: '__STATIC__/img/load-error.png',
        loading: '__STATIC__/img/loading.png',
        attempt: 2,
        listenEvents: ['scroll']
    });

    var app = new Vue({
        el: '#app',
        data: {
            'list': [],
            'search_data': {
                'p': "{$Think.get.p}",
                'author_name': '',
                'tags': ''
            },
        },
        methods: {},
        mounted: function () {
            var vue_this = this;
            var p = vue_this.search_data.p;
            //获取数据
            $.get("{:U('Index/getMoviesData')}", {p: p}, function (res) {
                if (res.code == 200) {
                    vue_this.list = res.data.data;
                } else {
                    layer.alert('请刷新重试');
                }
                $(".app-loading").hide();
            });
        }
    });

    /**
     * 刷新页面数据
     * @param {type} page
     * @returns {undefined}
     */
    function getData(page) {
        $(".app-loading").show();
        var vue_this = app._data;
        var data = vue_this.search_data;
        data.p = page;
        $.get('/back/Comic/getMoviesData', data, function (res) {
            if (res.code == 200) {
                vue_this.list = res.data.data;
                vue_this.page = res.data.page;
            } else {
                layer.alert('请刷新重试');
            }
            $(".app-loading").hide();
        });
        document.body.scrollTop = document.documentElement.scrollTop = 0;
    }
</script>
</html>